var u=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var T=(e,t)=>{for(var i in t)u(e,i,{get:t[i],enumerable:!0})},L=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of I(t))!E.call(e,o)&&o!==i&&u(e,o,{get:()=>t[o],enumerable:!(s=y(t,o))||s.enumerable});return e};var w=e=>L(u({},"__esModule",{value:!0}),e);var M={};T(M,{activate:()=>D});module.exports=w(M);var n=require("coc.nvim");function _(e,t){return e.line!==t.end.line||e.character!==t.end.character}var D=async e=>{let t=n.workspace.getConfiguration("copilot"),i=t.get("enable",!0),s=t.get("kindLabel","\uF113\xA0"),o=t.get("priority",1e3),b=t.get("limit",10),C=t.get("enablePreselect",!0),f=t.get("shortcut","Cop");if(!i)return;let h={async provideCompletionItems($,m,A,P){let{option:a}=P,p=null,d=[],v=await n.workspace.nvim.call("getbufvar",["","&filetype"]);if(a){let l=await n.workspace.nvim.createBuffer(a.bufnr).getVar("_copilot");if(!(l!=null&&l.suggestions))return null;let g=a.input;l.suggestions.forEach(({range:r,text:c})=>{let x={line:r.start.line,character:r.start.character},k=g.length===0&&_(m,r)?m:{line:r.end.line,character:r.end.character};d.push({label:c,kind:s,detail:"",documentation:{kind:n.MarkupKind.Markdown,value:`\`\`\`${v}
${c}
\`\`\``},textEdit:n.TextEdit.replace(n.Range.create(x,k),c),preselect:C})}),p={items:d.slice(0,b),isIncomplete:g.length<=3}}return p}};e.subscriptions.push(n.languages.registerCompletionItemProvider("copilot",f,null,h,[],o))};0&&(module.exports={activate});
